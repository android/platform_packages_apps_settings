{
  "comments": [
    {
      "key": {
        "uuid": "25275deb_fd3476b2",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2019-02-25T08:12:34Z",
      "side": 1,
      "message": "I don\u0027t understand why you need to test this. getProfile()\u0027s return value should not depend on whether the user is editing or not I think ?",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b229519b_650831b3",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-26T02:20:01Z",
      "side": 1,
      "message": "This condition was added to fix a old issue we met on android M, let me check if the issue still occurs or not without this.",
      "parentUuid": "25275deb_fd3476b2",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b09c8e53_cee9c657",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-27T03:31:54Z",
      "side": 1,
      "message": "Verified !mEditing is necessary here, without this VPN connection will not use configured proxy.\nConfigDialog.getprofile() is called in both editing mode and connecting mode.\nIn editing mode, hasProxy() is used to control validation, save/update user configured proxyInfo to vpn profile. hasProxy() is using a local parameter mProxySettings[MANUAL/NONE] which is not saved to vpn profile and this makes hasproxy()to be valid only in editing mode. So in connecting mode, !mEditing is necessary here to get and reuse the previous saved proxyInfo from vpn profile, otherwise previously saved proxyInfo will be flushed by null info.",
      "parentUuid": "b229519b_650831b3",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7af88e4c_ff9d35bc",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2019-02-27T06:43:02Z",
      "side": 1,
      "message": "I see.\nSo what that means is, when there is no proxy, in connect mode you\u0027ll return an empty ProxyInfo instead of null ? That sounds like a bug.\n\nAlso, it looks to me like you could simply make sure the fields always contain the right value by moving your new code in ll.204~210 to l.325 in updateUiControls. I think that\u0027s what this function is for, and also it looks to me like this problem would happen again and again because no code in here expect a difference between UI and setting.\n\nI believe if you move that code to updateUiControls, then you can simply remove the !mEditing check, get the behavior you want in both cases, and fix the bug where you\u0027ll return an empty proxy instead of a null one when !mEditing.",
      "parentUuid": "b09c8e53_cee9c657",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cefc300d_d0eec5de",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-27T07:11:01Z",
      "side": 1,
      "message": "You are right empty ProxyInfo is created in connecting mode, I will try the suggestion and update soon.",
      "parentUuid": "7af88e4c_ff9d35bc",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8bc8381_6e484aa6",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 488,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-28T01:22:17Z",
      "side": 1,
      "message": "thanks for the advice, we have verified the change works as expected now.",
      "parentUuid": "cefc300d_d0eec5de",
      "range": {
        "startLine": 488,
        "startChar": 12,
        "endLine": 488,
        "endChar": 22
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1111860_bcf62157",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2019-02-25T08:12:34Z",
      "side": 1,
      "message": "Nit : it\u0027s probably better to use\n\n  import android.net.Proxy;\n  Proxy.validate(host, port, \"\") \u003d\u003d Proxy.PROXY_VALID;\n\n...simply because ProxySelector.validate returns a resource ID which is a UI concept.\nBut it\u0027s not very different, really.",
      "range": {
        "startLine": 542,
        "startChar": 15,
        "endLine": 542,
        "endChar": 59
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afd63349_7f523018",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-26T02:20:01Z",
      "side": 1,
      "message": "Yes, almost same, since resource ID is not used, I agree with you to use Proxy.validate",
      "parentUuid": "d1111860_bcf62157",
      "range": {
        "startLine": 542,
        "startChar": 15,
        "endLine": 542,
        "endChar": 59
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df29817c_1bf24895",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 542,
      "author": {
        "id": 1159753
      },
      "writtenOn": "2019-02-27T03:31:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "afd63349_7f523018",
      "range": {
        "startLine": 542,
        "startChar": 15,
        "endLine": 542,
        "endChar": 59
      },
      "revId": "5ccea688db83621a3c93d9d2720c8c16526ffcef",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}