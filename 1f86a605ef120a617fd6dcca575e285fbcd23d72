{
  "comments": [
    {
      "key": {
        "uuid": "e45a1997_8ba8c255",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1125084
      },
      "writtenOn": "2017-12-14T16:03:10Z",
      "side": 1,
      "message": "Please add an automated test to the CL",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 52
      },
      "revId": "1f86a605ef120a617fd6dcca575e285fbcd23d72",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6a6cb79_248053f8",
        "filename": "src/com/android/settings/datausage/DataSaverBackend.java",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1125084
      },
      "writtenOn": "2017-12-14T16:03:10Z",
      "side": 1,
      "message": "change to an AtomicBoolean",
      "range": {
        "startLine": 113,
        "startChar": 12,
        "endLine": 113,
        "endChar": 33
      },
      "revId": "1f86a605ef120a617fd6dcca575e285fbcd23d72",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "699d9f14_06cdb031",
        "filename": "src/com/android/settings/datausage/DataSaverBackend.java",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1235718
      },
      "writtenOn": "2018-01-18T06:00:50Z",
      "side": 1,
      "message": "The purpose of change to an AtomicBoolean is to keep thread synchronization, not impact other place call loadWhitelist().\nWe think this change is not necessary.\n\n1.Only DataSaverSummary screen call refreshWhitelist(), set mWhitelistInitialized to false.\nUnrestrictedDataAccess.java and DataSaverSummary.java use different DataSaverBackend object. Change mWhitelistInitialized of DataSaverSummary not set mWhitelistInitialized of UnrestrictedDataAccess.\nAnd UnrestrictedDataAccess onDestroy() return DataSaverSummary, don\u0027t call loadWhitelist() at the same time.\n\n2.DataSaverSummary.java onResume, refreshWhitelist() of mDataSaverBackend run first, set mWhitelistInitialized to true after loadWhitelist().\nThe mWhitelistInitialized is true when other palace of DataSaverSummary call loadWhitelist().\n\n\nOr how about to have synchronized for loadWhitelist like this:\n    private synchronized void loadWhitelist(final boolean forceupdate) {\n        if (!forceupdate \u0026\u0026 mWhitelistInitialized) return;\n\n        for (int i \u003d mUidPolicies.size() - 1; i \u003e\u003d 0; i--) {\n            if (mUidPolicies.valueAt(i) \u003d\u003d POLICY_ALLOW_METERED_BACKGROUND) {\n                mUidPolicies.removeAt(i);\n            }\n        }\n        for (int uid : mPolicyManager.getUidsWithPolicy(POLICY_ALLOW_METERED_BACKGROUND)) {\n            mUidPolicies.put(uid, POLICY_ALLOW_METERED_BACKGROUND);\n        }\n        mWhitelistInitialized \u003d true;\n    }\n\nbut,, in this case, we should implement synchronization something for mUidPolicies..",
      "parentUuid": "f6a6cb79_248053f8",
      "range": {
        "startLine": 113,
        "startChar": 12,
        "endLine": 113,
        "endChar": 33
      },
      "revId": "1f86a605ef120a617fd6dcca575e285fbcd23d72",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdd33507_d6ba1ddc",
        "filename": "src/com/android/settings/datausage/DataSaverBackend.java",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1125084
      },
      "writtenOn": "2018-03-05T17:12:44Z",
      "side": 1,
      "message": "I think you are right that the change is not necessary. We can leave as is.",
      "parentUuid": "699d9f14_06cdb031",
      "range": {
        "startLine": 113,
        "startChar": 12,
        "endLine": 113,
        "endChar": 33
      },
      "revId": "1f86a605ef120a617fd6dcca575e285fbcd23d72",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}