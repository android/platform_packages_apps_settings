{
  "comments": [
    {
      "key": {
        "uuid": "65c02a8d_602d32c9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-24T04:56:39Z",
      "side": 1,
      "message": "If user have already had legacy VPN items in VPN Settings, then when user gets upgrading and taps the legacy VPN item the VPN Settings will crash.\nChange the default value of convertTypeToSelectedItemPosition() to 0 can prevent this problem.",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8da4bc07_0c0357eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:04:57Z",
      "side": 1,
      "message": "This will mean that the loaded profile is effectively invalid, cannot be saved, and cannot be started.\n\nMaybe leave a todo/bug to notify the user of what has happened, and we can address that in a later CL?\n\nAt the least, we\u0027ll probably need a toast noting that \"VPN type no longer supported.\"\n\nIdeally, we\u0027d have a dialog stating that \"VPN type no longer supported, please switch to IKEv2/IPsec\", with options to forget the profile there and then.",
      "parentUuid": "65c02a8d_602d32c9",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "069434d2_2756047d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:04:57Z",
      "side": 1,
      "message": "Lucas, do we have any documentation of this project in terms of design docs or some documentation discussing the implications on upgrading users? I think that\u0027d be helpful in ensuring we have consensus on how to handle this deprecation.",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "00ab395a_e19c2f94",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:05:58Z",
      "side": 1,
      "message": "But otherwise, code looks good.",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "804a172e_989cc90a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-27T08:15:42Z",
      "side": 1,
      "message": "No, we don\u0027t.\nBut maybe we can have some notes or discussion on b/161776767.",
      "parentUuid": "069434d2_2756047d",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "80ee752f_3c305514",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-27T08:15:42Z",
      "side": 1,
      "message": "Bug is filed: b/162198663",
      "parentUuid": "8da4bc07_0c0357eb",
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c063ff9_434ab56b",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 368,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:04:57Z",
      "side": 1,
      "message": "I doubt we can change those constants; it\u0027d result in a upgrading user\u0027s VPN profiles to be interpreted incorrectly (both legacy and IKEv2/IPsec profiles)\n\nAt some future point, we\u0027ll probably need a dialog to let a user know (upon upgrade) if some of their pre-existing VPN types are no longer valid (perhaps file a bug?)",
      "range": {
        "startLine": 367,
        "startChar": 7,
        "endLine": 368,
        "endChar": 57
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2c61abc_f951ea20",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 368,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-27T08:15:42Z",
      "side": 1,
      "message": "\u003e I doubt we can change those constants; it\u0027d result in a upgrading user\u0027s VPN profiles to be interpreted incorrectly (both legacy and IKEv2/IPsec profiles)\n\nSorry, I don\u0027t get your comment.\n\nAfter upgrading, the VPN types which user can see are only IKEv2 series, and no matter legacy VPN types have removed from VpnProfile.java or not, the index 0 will always match VpnProfile.TYPE_IKEV2_IPSEC_USER_PASS, index 1 will always match VpnProfile.TYPE_IKEV2_IPSEC_PSK and index 2 will always match VpnProfile.TYPE_IKEV2_IPSEC_RSA.\n\nSo...why can\u0027t we change those constants?\n\n\u003e At some future point, we\u0027ll probably need a dialog to let a user know (upon upgrade) if some of their pre-existing VPN types are no longer valid (perhaps file a bug?)\n\nBug is filed: b/162198663\n\nBTW, we may need to discuss when can we remove this function. Remove it in Android T?",
      "parentUuid": "3c063ff9_434ab56b",
      "range": {
        "startLine": 367,
        "startChar": 7,
        "endLine": 368,
        "endChar": 57
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0073c96b_db640bbe",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 379,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:04:57Z",
      "side": 1,
      "message": "Are these valid numbers? This seems like an unexpected value?",
      "range": {
        "startLine": 379,
        "startChar": 23,
        "endLine": 379,
        "endChar": 27
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae9d626c_089b6189",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 379,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-27T08:15:42Z",
      "side": 1,
      "message": "I think the problem here is not an unexpected value but the \"default\" block won\u0027t be ran.\nAfter removing the legacy VPN type from Settings, I think the max number of \"type\" will be 2, so you can also said that the \"default\" block won\u0027t be ran.",
      "parentUuid": "0073c96b_db640bbe",
      "range": {
        "startLine": 379,
        "startChar": 23,
        "endLine": 379,
        "endChar": 27
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27c96f02_122d5f3c",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 397,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2020-07-24T22:04:57Z",
      "side": 1,
      "message": "Question: Is there an option to \"deselect\"? If so, that\u0027d be ideal to signal that we\u0027ve reset the field",
      "range": {
        "startLine": 395,
        "startChar": 0,
        "endLine": 397,
        "endChar": 25
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98026fa0_c315e56e",
        "filename": "src/com/android/settings/vpn2/ConfigDialog.java",
        "patchSetId": 4
      },
      "lineNbr": 397,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-07-27T08:15:42Z",
      "side": 1,
      "message": "There is a \"forget\" option in VPN configuration dialog, when user taps it, the VPN item will be removed.\nSo when user taps the legacy VPN item which user added before, VPN Settings can show a toast or dialog to notify user that the legacy VPN type has removed and suggests user that user can remove this item or re-configure a new VPN item with IKEv2 series VPN types.\nWhat do you think?",
      "parentUuid": "27c96f02_122d5f3c",
      "range": {
        "startLine": 395,
        "startChar": 0,
        "endLine": 397,
        "endChar": 25
      },
      "revId": "41cb2901648b6a2af2517428c7dfdf20159d7719",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}